# Test suite information

### Test name
Test for PWM capabilities with LED connected with using LEDC Controller.

### Test path
tests/repo_tests/general_tests/pwm_ledc

### Type
- Pytest test
- Hardware test
- Shell test

### Description
This test is designed to verify board for PWM signal generation and frequency/duty cycle control over Zephyr LEDC API. For this test, the ESP32-S3 Devkitc board is used. The board has two GPIO pins - GPIO13 and GPIO24. GPIO13 is transmittiing the PWM signal and GPIO24 is used for measuring this PWM signal. The PWM signal is generated by the LEDC controller and measured by gpiod library in Pytest script. PWM signal parameters are set in main.c script.

PWM feature is supported in Zephyr RTOS by two solutions:
1. LEDC API - for simplier use cases but enough precise controller systems. For more details see [LEDC API](https://docs.zephyrproject.org/latest/api/ledc.html)
2. MCPWM API - for more sofisticated controling of stepper motors/servo systems. For more details see [MCPWM API](https://docs.zephyrproject.org/latest/api/mcpwm.html)

<strong>gpiod - Python bindings for libgpiod:</strong><br/>
is a C library for GPIO programming, designed to replace the old sysfs interface for Raspberry Pi 5+. For more details see [gpiod](https://pypi.org/project/gpiod/).

Because the ESP32-S3 Devkitc board does not support the internal PWM loopback connections, the reference GPIO24 was used for measuring PWM signal from tested GPIO13 with gpiod-library.

### Preconditions
- ESP32-S3 Devkitc target board.
- Tested GPIO13 signal wired to reference GPIO24 pin.
- Reference LED is connected to GPIO13 output - visual verification for PWM signal.
- GPIO24 pin is set for PWM measurement with gpiod library in Pytest script.

### Test steps
1. Run the test with `west twister`command.
2. Verify that PWM signal characteristics (frequency, duty cycle) are equal to expected values.
3. For visual reference use LED connected to tested GPIO13 pin.

### Expected results
PWM frequency and duty cycle measured by HW means are equal to values set in main.c script.

### Notes
N.A.